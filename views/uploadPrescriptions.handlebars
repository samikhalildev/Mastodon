<main class="container-fluid">
    <div class="row">
        <section class="col-lg-8">

            <div class="container">
                <h1>Search or select a patient</h1>

                <select id="patients" onchange="PatientSelected()" class="selectpicker" data-style="btn-info" data-max-options="1" data-live-search="true">
                    <optgroup label="Patients">
                        <option value="notSelected"> Nothing selected</option>
                        {{#each patient}}
                            <option value="{{this.username}}" name="accessID"> {{this.username}} </option>
                        {{/each}}
                    </optgroup>
                </select>

                <form method="post" action="/uploadPrescriptions">

                    <div id="prescriptionForm" style="display: none;" class="form-group custom-form">
                        <input type="hidden" id="myField" name="username" value=""/>

                        <textarea class="form-control" name="prescription" placeholder="Write a description here..." rows="5"></textarea>
                    </div>

                    <button style="display: none;" id="button" type="submit" class="btn btn-default uploadbtn">Upload Prescription</button>
                </form>



            </div>
        </section>
    </div>
</main>





<script>
    function PatientSelected(){
        var patient = document.getElementById("patients");
        var button  = document.getElementById("button");
        var username = patient.options[patient.selectedIndex].value;
        console.log(username);

        var prescriptionForm = document.getElementById("prescriptionForm");

        if (patient != null && username != "notSelected") {
            document.getElementById('myField').value = username;
            prescriptionForm.style.display = "block";
            button.style.display = "block";

        } else {
            prescriptionForm.style.display = "none";
            button.style.display = "none";
        }
    }
</script>
